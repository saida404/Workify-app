<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body style="background-color: #f4f5f7;">
<!--NAVBAR-->
<% if (user.roll === 'korisnik') { %>
    <%- include('components/userNav') %>
<% } else if (user.roll === 'admin') { %>
    <%- include('components/adminNav') %>
<% } %>


<!--PROFIl-->
<div class="row mt-5 p-2 p-md-5 tekst-center justify-content-center" id="profile" style="background-color: #f4f5f7;">
    <div class="col-10 col-md-7">
        <div class="card mb-3" style="border-radius: .5rem;">
            <div class="row g-0">
                <div class="col-md-4 gradient-custom text-center text-white" style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp" alt="Avatar" class="img-fluid my-5" style="width: 80px;" />
                    <h5 class="text-black"><%= user.ime %> <%= user.prezime %></h5>
                    <p class="text-black"><%= user.username %></p>
                    <i class="far fa-edit mb-5"></i>
                </div>
                <div class="col-md-8">
                    <div class="card-body p-4">
                        <h6>Informacije</h6>
                        <hr class="mt-0 mb-4">
                        <div class="row pt-1">
                            <div class="col-6 mb-3">
                                <h6>Email</h6>
                                <p class="text-muted"><%= user.email %></p>
                            </div>
                            <div class="col-6 mb-3">
                                <h6>Grad</h6>
                                <p class="text-muted"><%= user.grad %></p>
                            </div>
                        </div>
                        <h6>Struƒçna sprema</h6>
                        <hr class="mt-0 mb-4">
                        <div class="row pt-1">
                            <div class="col-6 mb-3">
                                <p class="text-muted"><%= user.strucna_sprema %></p>
                            </div>
                            <div class="col-6 mb-3">
                                <h6>God. radnog iskustva u struci </h6>
                                <p class="text-muted"><%= user.god_radno_iskustvo %></p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="row mt-2 p-5" style="background-color: #f4f5f7;">
    <div class="col-sm-6 ">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Obrazovanje</h5>
                <p id="education-text" class="card-text"><%= user.obrazovanje %></p>
                <button id="edit-education-btn" class="btn btn-primary">Uredi</button>

                <form id="edit-education-form" style="display: none;">
                    <div class="form-group">
                        <label for="education-input">Unesi izmjene</label>
                        <input type="text" id="education-input" class="form-control" value="">
                    </div>
                    <button type="button" id="save-education-btn" class="btn btn-success mt-3">Spasi</button>
                    <button type="button" id="cancel-edit-btn" class="btn btn-secondary mt-3">Odustani</button>
                </form>
            </div>
        </div>
    </div>


    <div class="col-sm-6 sm-mt-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">CV</h5>
                <p id="documents-text" class="card-text">
                    <%= cv ? "" : "Dodaj CV u PDF formatu." %>
                </p>
                <% if (cv) { %>
                    <div id="file-display">
                        <p id="file-name"><%= cv %></p>
                        <a id="download-link" href="/korisnik/download-cv" target="_blank" class="btn btn-secondary">Preuzmi CV</a>
                    </div>
                <% } else { %>
                    <button id="edit-documents-btn" class="btn btn-primary">Dodaj dokumente</button>
                <% } %>

                <form id="edit-documents-form" style="display: none;" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="title-input">Naziv dokumenta</label>
                        <input type="text" name="title" id="title-input" class="form-control mb-2" placeholder="Title" required>
                        <br />
                        <label for="documents-input">Odaberi dokumente</label>
                        <input type="file" name="cv-fajl" id="documents-input" class="form-control" accept=".pdf" required>
                    </div>
                    <button type="submit" id="save-edit-btnCv" class="btn btn-success mt-3">Spasi</button>
                    <button type="button" id="cancel-edit-btnCv" class="btn btn-secondary mt-3">Odustani</button>
                </form>
            </div>
        </div>
    </div>
</div>

    <div class="row  p-5" style="background-color: #f4f5f7;">
        <div class="col-sm-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Biografija</h5>
                    <p id="bio-text" class="card-text"><%= user.biografija%></p>
                    <button id="edit-bio-btn" class="btn btn-primary">Uredi</button>

                    <form id="edit-bio-form" style="display: none;">
                        <div class="form-group">
                            <label for="documents-input">Unesi izmjene</label>
                            <input type="text" id="bio-input" class="form-control" value="">
                        </div>
                        <button type="button" id="save-bio-btn" class="btn btn-success mt-3">Spasi</button>
                        <button type="button" id="cancel-bio-btn" class="btn btn-secondary mt-3">Odustani</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-sm-6 sm-mt-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Radno iskustvo</h5>
                    <p id="ri-text" class="card-text"><%= user.radno_iskustvo %></p>
                    <button id="edit-ri-btn" class="btn btn-primary">Uredi</button>

                    <form id="edit-ri-form" style="display: none;">
                        <div class="form-group">
                            <label for="ri-input">Unesi izmjene</label>
                            <input type="text" id="ri-input" class="form-control" value="">
                        </div>
                        <button type="button" id="save-ri-btn" class="btn btn-success mt-3">Spasi</button>
                        <button type="button" id="cancel-ri-btn" class="btn btn-secondary mt-3">Odustani</button>
                    </form>
                </div>
            </div>
        </div>
</div>

<div class="row p-4">
    <!-- Aktivni konkursi -->
    <div class="col-12">
        <h3>Aktivni konkursi</h3>
    </div>
    <div class="col-12">
        <table class="table">
            <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Konkurs</th>
                <th scope="col">Firma</th>
                <th scope="col">Pozicija</th>
                <th scope="col">Datum objave</th>
                <th scope="col">Status</th>
            </tr>
            </thead>
            <tbody>
            <% activeJobs.forEach((job, index) => { %>
                <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= job.naziv %></td>
                    <td><%= job.naziv_firme %></td>
                    <td><%= job.pozicija %></td>
                    <td><%= job.datum_objave.toLocaleDateString() %></td>
                    <td><%= job.status %></td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
</div>

<div class="row p-4">
    <!-- Arhivirani konkursi -->
    <div class="col-12">
        <h3>Arhivirani konkursi</h3>
    </div>
    <div class="col-12">
        <table class="table">
            <thead class="thead-light">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Konkurs</th>
                <th scope="col">Firma</th>
                <th scope="col">Pozicija</th>
                <th scope="col">Datum prijave</th>
                <th scope="col">Status</th>
            </tr>
            </thead>
            <tbody>
            <% archivedJobs.forEach((job, index) => { %>
                <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= job.naziv %></td>
                    <td><%= job.naziv_firme %></td>
                    <td><%= job.pozicija %></td>
                    <td><%= job.datum_objave.toLocaleDateString() %></td>
                    <td><%= job.status %></td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
</div>
</div>
<!--Futer-->

<%- include('components/footer') %>

<script src="/javascripts/update-buttons.js"></script>
<script src="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>